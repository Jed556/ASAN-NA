<html>

<head>
    <script src="http://code.jquery.com/jquery.min.js"></script>
</head>

<body>
    <div id="accuracy-chart"></div>
    <div id="speed-chart"></div>

    <script type="module">
        import "https://cdn.plot.ly/plotly-2.9.0.min.js"
        // import data from "http://localhost:8888"
        function getData(index) {
            $.ajax({
                url: "http://localhost:8888",
                success: function (data) {
                    console.log(data);

                    var dataArr = [];
                    for (var i = 0; i < data.length; i++) {
                        var train = data[i].train;
                        for (var j = 0; j < train.length; j++) {
                            var err = train[j].error;
                        }
                    }
                    console.log(dataArr);
                    return dataArr[index];
                }
            });
        }

        var cnt = 0;

        Plotly.newPlot('accuracy-chart', [{
            y: [getData(cnt)],
            type: 'line'
        }]);

        setInterval(function () {
            Plotly.extendTraces('accuracy-chart', { y: [[getData(cnt)]] }, [0]);
            cnt++;

            if (cnt > 500) {
                Plotly.relayout('accuracy-chart', {
                    xaxis: {
                        range: [cnt - 500, cnt]
                    }
                });
            }

        }, 10);

    </script>

</body>


</html>